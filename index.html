<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>115會考倒數衝刺站</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3b82f6',
              secondary: '#64748b',
              accent: '#f59e0b',
            }
          }
        }
      }
    </script>

    <style>
      body {
        font-family: 'Noto Sans TC', sans-serif;
        background-color: #f8fafc;
      }
      .gradient-text {
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        background-image: linear-gradient(to right, #2563eb, #4f46e5);
      }
      /* Mobile Menu Transition */
      #mobile-menu {
        transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
        max-height: 0;
        opacity: 0;
        overflow: hidden;
      }
      #mobile-menu.open {
        max-height: 200px;
        opacity: 1;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="text-slate-900 pb-12 min-h-screen bg-slate-50">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50 backdrop-blur-md bg-white/80">
        <div class="max-w-5xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- Logo & Title -->
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg text-white shadow-lg shadow-blue-200">
                        <i data-lucide="graduation-cap" width="24" height="24"></i>
                    </div>
                    <div>
                        <h1 class="text-xl sm:text-2xl font-black tracking-tight text-slate-800">
                            115 會考倒數
                        </h1>
                        <p class="text-xs text-slate-500 font-medium hidden sm:block">
                            2026 Junior High School Comprehensive Assessment
                        </p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center gap-1">
                    <a href="https://ceecc.vercel.app/" target="_blank" class="px-4 py-2 text-sm font-bold text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all">
                        學測倒數
                    </a>
                    <a href="https://ceeecc.vercel.app/" target="_blank" class="px-4 py-2 text-sm font-bold text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all">
                        分科倒數
                    </a>
                    <a href="https://tcte.onrender.com/" target="_blank" class="px-4 py-2 text-sm font-bold text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all">
                        統測倒數
                    </a>
                </nav>

                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors" aria-label="開啟選單">
                    <i data-lucide="menu" width="24" height="24"></i>
                </button>
            </div>

            <!-- Mobile Dropdown Menu -->
            <div id="mobile-menu" class="md:hidden border-t border-slate-100 mt-3">
                <div class="flex flex-col gap-1 py-2">
                    <a href="https://ceecc.vercel.app/" target="_blank" class="flex items-center justify-between px-4 py-3 text-slate-700 hover:bg-slate-50 rounded-lg font-medium group">
                        <span>學測倒數</span>
                        <i data-lucide="external-link" width="16" height="16" class="text-slate-400 group-hover:text-blue-500"></i>
                    </a>
                    <a href="https://ceeecc.vercel.app/" target="_blank" class="flex items-center justify-between px-4 py-3 text-slate-700 hover:bg-slate-50 rounded-lg font-medium group">
                        <span>分科倒數</span>
                        <i data-lucide="external-link" width="16" height="16" class="text-slate-400 group-hover:text-blue-500"></i>
                    </a>
                    <a href="https://tcte.onrender.com/" target="_blank" class="flex items-center justify-between px-4 py-3 text-slate-700 hover:bg-slate-50 rounded-lg font-medium group">
                        <span>統測倒數</span>
                        <i data-lucide="external-link" width="16" height="16" class="text-slate-400 group-hover:text-blue-500"></i>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 pt-8 space-y-8">
        
        <!-- Countdowns Section -->
        <div id="countdowns-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Dynamic Content will be injected here -->
            <div class="bg-white p-6 rounded-2xl shadow animate-pulse h-48"></div>
            <div class="bg-white p-6 rounded-2xl shadow animate-pulse h-48"></div>
        </div>

        <!-- Quotes Section (Previously AI Coach) -->
        <div id="ai-coach-container">
            <!-- Dynamic Content -->
        </div>

        <!-- Timeline Section -->
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
            <h3 class="text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <i data-lucide="calendar-days" class="text-blue-600"></i>
                重要日程表 (民國115年)
            </h3>
            
            <div class="relative pl-4">
                <!-- Vertical Line -->
                <div class="absolute left-[27px] top-2 bottom-4 w-0.5 bg-slate-200"></div>
                <div id="timeline-events" class="space-y-8">
                    <!-- Events will be injected here -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-slate-400 text-sm py-8">
            <p>資料來源：教育部國教署及全國試務會 (以官方最新公告為準)</p>
            <p class="mt-2 opacity-60">加油，未來的你正在等你。</p>
        </footer>

    </main>

    <!-- Application Logic -->
    <script type="module">
        // --- Constants & Data ---
        const YEAR_AD = 2026;
        const EXAM_EVENTS = [
            {
                id: 'registration',
                title: '國中會考報名',
                startDate: new Date(YEAR_AD, 2, 5), // March 5
                endDate: new Date(YEAR_AD, 2, 7),   // March 7
                note: '115/03/05 ~ 115/03/07'
            },
            {
                id: 'admit_card',
                title: '國中會考寄發准考證',
                startDate: new Date(YEAR_AD, 3, 10), // April 10
                note: '115/04/10'
            },
            {
                id: 'exam_day',
                title: '國中會考日期',
                startDate: new Date(YEAR_AD, 4, 16), // May 16
                endDate: new Date(YEAR_AD, 4, 17),   // May 17
                note: '115/05/16 ~ 115/05/17',
                isMainExam: true
            },
            {
                id: 'score_release',
                title: '國中會考成績公布',
                startDate: new Date(YEAR_AD, 5, 5), // June 5
                note: '115/06/05'
            },
            {
                id: 'rank_release',
                title: '個人序位區間公告',
                startDate: new Date(YEAR_AD, 5, 18), // June 18
                note: '115/06/18'
            },
            {
                id: 'volunteer_start',
                title: '就學區免試入學填志願',
                startDate: new Date(YEAR_AD, 5, 18), // June 18
                note: '115/06/18（開始）'
            },
            {
                id: 'placement_result',
                title: '就學區免試入學放榜',
                startDate: new Date(YEAR_AD, 6, 7), // July 7
                note: '115/07/07（放榜依各地區時間為主）'
            },
            {
                id: 'reporting',
                title: '免試入學報到',
                startDate: new Date(YEAR_AD, 6, 9), // July 9
                note: '115/07/09'
            }
        ];

        const LOCAL_QUOTES = [
            "堅持不是因為看到希望，而是堅持了才看到希望。",
            "未來的你，會感謝現在拼命的自己。",
            "不需要很厲害才能開始，但要開始了才會很厲害。",
            "你現在流的汗水，會變成查榜時喜極而泣的淚水。",
            "寧願辛苦一陣子，不要辛苦一輩子。",
            "每天進步一點點，115會考就是你的舞台。",
            "考場如戰場，筆桿就是你的槍，冷靜應戰！",
            "專注當下，別讓焦慮偷走你的時間。",
            "休息是為了走更長遠的路，但別忘了回來。",
            "相信自己，你的潛力超乎你的想像。",
            "夢想不會發光，發光的是追逐夢想的你。",
            "不要在該奮鬥的年紀選擇安逸。",
            "每一次練習，都是為了在考場上更完美地綻放。",
            "成功沒有捷徑，只有腳踏實地的努力。",
            "比你優秀的人都還在努力，你憑什麼喊累？",
            "把不會的題目弄懂，就是分數提升的開始。",
            "會考只是人生的轉運站，但請努力搭上你想去的那班車。",
            "這條路雖然孤單，但盡頭有繁花盛開。",
            "不放手，直到夢想到手。",
            "保持平常心，發揮實力，你一定可以！"
        ];

        // --- Utils ---
        function calculateTimeRemaining(targetDate) {
            const now = new Date();
            const target = new Date(targetDate);
            target.setHours(0, 0, 0, 0); // Target midnight start of day

            const diff = target.getTime() - now.getTime();

            if (diff <= 0) {
                return { days: 0, hours: 0, minutes: 0, seconds: 0, totalSeconds: 0 };
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            return { days, hours, minutes, seconds, totalSeconds: diff / 1000 };
        }

        function formatROCDate(date) {
            const year = date.getFullYear() - 1911;
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const day = date.getDate().toString().padStart(2, '0');
            return `${year}/${month}/${day}`;
        }

        function getDayOfWeek(date) {
            const days = ['週日', '週一', '週二', '週三', '週四', '週五', '週六'];
            return days[date.getDay()];
        }

        // --- Render Functions ---

        function createCountdownHTML(targetDate, title, subtitle, isHighlight) {
            const timeLeft = calculateTimeRemaining(targetDate);
            const isArrived = timeLeft.totalSeconds <= 0;
            
            const bgClass = isHighlight 
                ? 'bg-gradient-to-br from-blue-600 to-indigo-700 text-white ring-4 ring-blue-100' 
                : 'bg-white text-slate-800 border border-slate-200';
            
            const iconName = isHighlight ? 'timer' : 'calendar-clock';
            const iconColor = isHighlight ? 'text-white' : 'text-slate-800';
            const labelColor = isHighlight ? 'text-blue-200' : 'text-slate-500';
            const numberBg = isHighlight ? 'bg-white/10 backdrop-blur-sm' : 'bg-slate-100';

            let contentHtml = '';

            if (isArrived) {
                contentHtml = `<div class="text-3xl font-bold mt-6">${isHighlight ? '考試開始 / 已結束' : '今日發生'}</div>`;
            } else {
                const timeUnit = (val, label) => `
                    <div class="flex flex-col items-center p-2 rounded-lg ${numberBg}">
                        <span class="text-2xl sm:text-3xl font-mono font-bold ${iconColor}">${val}</span>
                        <span class="text-xs ${labelColor}">${label}</span>
                    </div>
                `;
                contentHtml = `
                    <div class="mt-6 grid grid-cols-4 gap-2 text-center">
                        ${timeUnit(timeLeft.days, '天')}
                        ${timeUnit(timeLeft.hours, '時')}
                        ${timeUnit(timeLeft.minutes, '分')}
                        ${timeUnit(timeLeft.seconds, '秒')}
                    </div>
                `;
            }

            return `
                <div class="relative overflow-hidden rounded-2xl p-6 shadow-lg transition-all duration-300 hover:shadow-xl ${bgClass}">
                    <div class="absolute -right-6 -top-6 opacity-10 rotate-12">
                        <i data-lucide="${iconName}" width="150" height="150"></i>
                    </div>
                    <div class="relative z-10 flex flex-col h-full justify-between">
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <h2 class="text-lg font-bold tracking-wide uppercase ${isHighlight ? 'text-blue-100' : 'text-slate-500'}">
                                    ${title}
                                </h2>
                                ${isHighlight ? '<span class="bg-amber-400 text-amber-900 text-xs font-bold px-2 py-0.5 rounded-full">TARGET</span>' : ''}
                            </div>
                            ${subtitle ? `<p class="text-sm ${isHighlight ? 'text-blue-200' : 'text-slate-400'}">${subtitle}</p>` : ''}
                        </div>
                        ${contentHtml}
                    </div>
                </div>
            `;
        }

        function renderCountdowns() {
            const now = new Date();
            const mainExam = EXAM_EVENTS.find(e => e.isMainExam);
            const nextEvent = EXAM_EVENTS.find(e => {
                const target = e.endDate || e.startDate;
                const endOfDay = new Date(target);
                endOfDay.setHours(23, 59, 59, 999);
                return endOfDay > now;
            });

            const container = document.getElementById('countdowns-container');
            let html = '';

            if (mainExam) {
                html += createCountdownHTML(mainExam.startDate, "距離國中會考", mainExam.note, true);
            }

            if (nextEvent && nextEvent.id !== mainExam?.id) {
                html += createCountdownHTML(nextEvent.startDate, `距離 ${nextEvent.title}`, nextEvent.note, false);
            }

            container.innerHTML = html;
            
            // Initialize icons for new elements
            if (window.lucide) window.lucide.createIcons();
        }

        function renderTimeline() {
            const now = new Date();
            now.setHours(0, 0, 0, 0);

            const container = document.getElementById('timeline-events');
            const html = EXAM_EVENTS.map(event => {
                const isPast = event.endDate ? event.endDate < now : event.startDate < now;
                const isCurrent = (() => {
                    if (event.endDate) {
                        return now >= event.startDate && now <= event.endDate;
                    }
                    return now.getTime() === event.startDate.getTime();
                })();

                const icon = isPast ? 'check-circle-2' : isCurrent ? 'map-pin' : 'circle';
                const iconColorClass = isCurrent 
                    ? 'border-blue-600 text-blue-600 scale-125 shadow-md shadow-blue-200 bg-white' 
                    : isPast 
                        ? 'border-slate-400 text-slate-400 bg-white' 
                        : 'border-slate-300 text-slate-300 bg-white';
                
                const titleColor = isCurrent ? 'text-blue-700' : 'text-slate-800';
                const dateColor = isCurrent ? 'text-blue-600 font-bold' : 'text-slate-500';

                return `
                    <div class="relative flex gap-4 group ${isPast ? 'opacity-60' : ''}">
                        <div class="relative z-10 flex-shrink-0 w-6 h-6 mt-1 rounded-full border-2 flex items-center justify-center transition-transform ${iconColorClass}">
                            <i data-lucide="${icon}" width="${isCurrent ? 16 : (isPast ? 16 : 12)}" class="${isCurrent ? 'fill-blue-600 text-white' : (isPast ? '' : 'fill-white')}"></i>
                        </div>
                        <div class="flex-1">
                            <div class="flex flex-wrap items-baseline justify-between gap-2">
                                <h4 class="font-bold text-lg ${titleColor}">${event.title}</h4>
                                <span class="text-sm font-mono ${dateColor}">
                                    ${formatROCDate(event.startDate)} (${getDayOfWeek(event.startDate)})
                                </span>
                            </div>
                            <p class="text-slate-600 mt-1 text-sm">${event.note}</p>
                            ${event.isMainExam && !isPast ? '<div class="mt-2 inline-block px-3 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full">關鍵決戰日</div>' : ''}
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = html;
            if (window.lucide) window.lucide.createIcons();
        }

        // --- Quote / Motivation Logic ---
        function initQuotes() {
            const container = document.getElementById('ai-coach-container');
            
            // Pick a random quote
            const getRandomQuote = () => LOCAL_QUOTES[Math.floor(Math.random() * LOCAL_QUOTES.length)];

            const renderQuote = (text, isLoading = false) => {
                container.innerHTML = `
                    <div class="bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-100 rounded-2xl p-6 shadow-sm relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-5">
                            <i data-lucide="sparkles" width="120" height="120" class="text-amber-500"></i>
                        </div>
                        <div class="relative z-10">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-2 text-amber-800 font-bold">
                                    <i data-lucide="zap" width="20" height="20"></i>
                                    <span>每日會考戰鬥格言</span>
                                </div>
                                <button id="refresh-quote-btn" class="p-2 text-amber-600 hover:bg-amber-100 rounded-full transition-colors ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}" ${isLoading ? 'disabled' : ''}>
                                    <i data-lucide="refresh-cw" width="18" height="18" class="${isLoading ? 'animate-spin' : ''}"></i>
                                </button>
                            </div>
                            <div class="flex gap-4">
                                <div class="text-amber-300 flex-shrink-0 -mt-1 transform scale-x-[-1]">
                                    <i data-lucide="quote" width="32" height="32"></i>
                                </div>
                                <p class="text-lg text-slate-700 font-medium leading-relaxed italic transition-opacity duration-300 ${isLoading ? 'opacity-50' : 'opacity-100'}">
                                    ${text}
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                if (window.lucide) window.lucide.createIcons();
                
                const btn = document.getElementById('refresh-quote-btn');
                if(btn) btn.onclick = () => refreshQuote();
            };

            const refreshQuote = () => {
                // Show loading state briefly for UX
                renderQuote("正在尋找靈感...", true);
                
                setTimeout(() => {
                    renderQuote(getRandomQuote());
                }, 400); // Short delay to make the refresh feel "real"
            };

            // Initial load
            renderQuote(getRandomQuote());
        }

        function initMobileMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            
            if (btn && menu) {
                btn.addEventListener('click', () => {
                    menu.classList.toggle('open');
                });
            }
        }

        // --- Main Init ---
        function init() {
            renderCountdowns();
            setInterval(renderCountdowns, 1000);
            renderTimeline();
            initQuotes(); // Replaces initAiCoach
            initMobileMenu();
        }

        // Start when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>